(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[475],{3383:()=>{},3475:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var n=t(5155),o=t(2115),l=t(7856),a=t.n(l);t(3383);var u=t(5704);let c=e=>{let{center:r,zoom:t,children:l}=e,c=(0,o.useRef)(null),s=(0,o.useRef)(null),[i,d]=(0,o.useState)(!1),p=u.env.NEXT_PUBLIC_MAPBOX_TOKEN,b=(0,o.useMemo)(()=>r&&Array.isArray(r)&&2===r.length?r:[35.5,-83],[r]),m=(0,o.useMemo)(()=>null!=t?t:7,[t]);(0,o.useEffect)(()=>{if(c.current&&!s.current)return!function(){try{let e=document.createElement("canvas");return!!(e.getContext("webgl")||e.getContext("experimental-webgl")||e.getContext("webgl2"))}catch(e){return console.warn("WebGL check failed:",e),!1}}()?void console.error("WebGL not supported. Mapbox GL JS requires WebGL."):p?(s.current=new(a()).Map({container:c.current,style:"mapbox://styles/mapbox/outdoors-v12",center:[b[1],b[0]],zoom:m,accessToken:p,renderWorldCopies:!1,maxPitch:60,antialias:!1}),s.current.addControl(new(a()).NavigationControl,"top-right"),s.current.on("load",()=>{d(!0),console.log("Mapbox GL map loaded")}),s.current.on("error",e=>{console.error("Mapbox GL error:",e)}),()=>{s.current&&(s.current.remove(),s.current=null,d(!1))}):void console.error("Mapbox token not found")},[]),(0,o.useEffect)(()=>{if(s.current&&i){let e=s.current.getCenter(),r=s.current.getZoom(),t=[b[1],b[0]],n=Math.abs(e.lng-t[0])>1e-4||Math.abs(e.lat-t[1])>1e-4,o=Math.abs(r-m)>.1;(n||o)&&s.current.flyTo({center:t,zoom:m,duration:1e3})}},[b,m,i]);let f=o.Children.map(l,e=>o.isValidElement(e)?o.cloneElement(e,{map:s.current,mapLoaded:i}):e);return(0,n.jsx)("div",{ref:c,style:{height:"100%",width:"100%"},children:f})}}}]);
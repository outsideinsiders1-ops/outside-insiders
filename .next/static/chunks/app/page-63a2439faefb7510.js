(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1150:(e,s,n)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return c}});let a=n(5155),t=n(2115),l=n(4437);function i(e){return{default:e&&"default"in e?e.default:e}}n(6552);let r={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},c=function(e){let s={...r,...e},n=(0,t.lazy)(()=>s.loader().then(i)),c=s.loading;function o(e){let i=c?(0,a.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,r=!s.ssr||!!s.loading,o=r?t.Suspense:t.Fragment,d=s.ssr?(0,a.jsxs)(a.Fragment,{children:[null,(0,a.jsx)(n,{...e})]}):(0,a.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(n,{...e})});return(0,a.jsx)(o,{...r?{fallback:i}:{},children:d})}return o.displayName="LoadableComponent",o}},1740:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>F});var a=n(5155),t=n(2115),l=n(6278),i=n.n(l),r=n(1993),c=n(5704);let o=c.env.NEXT_PUBLIC_SUPABASE_URL||"",d=c.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"",u=o&&d?(0,r.UU)(o,d):null;async function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!u)throw Error("Supabase client not initialized. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY environment variables.");let s=u.from("parks").select("*").not("latitude","is",null).not("longitude","is",null);e.agency&&(s=s.eq("agency",e.agency)),e.state&&(s=s.eq("state",e.state));let{data:n,error:a}=await s;if(a)throw console.error("Error fetching parks:",a),a;return n||[]}let m={map:{defaultCenter:[35.5,-83],defaultZoom:7,nearMeZoom:10,detailZoom:12,minZoom:4,maxZoom:18}},p=()=>(0,a.jsx)("header",{className:"header",children:(0,a.jsxs)("div",{className:"header-content",children:[(0,a.jsx)("h1",{children:"Outside Insiders"}),(0,a.jsx)("p",{children:"Discover all public recreation spaces in one place"})]})});var x=n(2846);let g=e=>{let{parkCount:s,sortedByDistance:n}=e;return(0,a.jsxs)("div",{className:"stats",children:[(0,a.jsxs)("div",{className:"stats-left",children:[(0,a.jsxs)("span",{children:["Showing ",s," parks"]}),n&&(0,a.jsx)("span",{children:" (sorted by distance)"})]}),(0,a.jsxs)("div",{className:"legend",children:[(0,a.jsxs)("span",{className:"legend-item",children:[(0,a.jsx)("span",{className:"legend-dot",style:{backgroundColor:x.$.markerColors.State}}),"State"]}),(0,a.jsxs)("span",{className:"legend-item",children:[(0,a.jsx)("span",{className:"legend-dot",style:{backgroundColor:x.$.markerColors.COUNTY}}),"County"]}),(0,a.jsxs)("span",{className:"legend-item",children:[(0,a.jsx)("span",{className:"legend-dot",style:{backgroundColor:x.$.markerColors.CITY}}),"City"]}),(0,a.jsxs)("span",{className:"legend-item",children:[(0,a.jsx)("span",{className:"legend-dot",style:{backgroundColor:x.$.markerColors.NPS}}),"NPS"]}),(0,a.jsxs)("span",{className:"legend-item",children:[(0,a.jsx)("span",{className:"legend-dot",style:{backgroundColor:x.$.markerColors.USFS}}),"USFS"]}),(0,a.jsxs)("span",{className:"legend-item",children:[(0,a.jsx)("span",{className:"legend-dot",style:{backgroundColor:x.$.markerColors.BLM}}),"BLM"]}),(0,a.jsxs)("span",{className:"legend-item",children:[(0,a.jsx)("span",{className:"legend-dot",style:{backgroundColor:x.$.markerColors.FWS}}),"FWS"]})]})]})},j=e=>{let{onLocationFound:s,mapboxToken:n}=e,[l,i]=(0,t.useState)(""),[r,c]=(0,t.useState)(!1),[o,d]=(0,t.useState)(null),u=async e=>{if(e.preventDefault(),l.trim()){c(!0),d(null);try{let e=await fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(l),".json?access_token=").concat(n,"&country=us&limit=1")),a=await e.json();if(a.features&&a.features.length>0){let[e,n]=a.features[0].center,t=a.features[0].place_name;s({lat:n,lon:e,name:t}),d(null),console.log("Found location: ".concat(t))}else d('Location not found. Try "City, State" format.')}catch(e){console.error("Geocoding error:",e),d("Error searching location. Please try again.")}finally{c(!1)}}};return(0,a.jsxs)("div",{className:"search-container",children:[(0,a.jsxs)("form",{onSubmit:u,className:"search-form",children:[(0,a.jsxs)("div",{className:"search-input-wrapper",children:[(0,a.jsxs)("svg",{className:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,a.jsx)("path",{d:"m21 21-4.35-4.35"})]}),(0,a.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),placeholder:"Search location (e.g., Asheville, NC)",className:"search-input",disabled:r}),l&&(0,a.jsx)("button",{type:"button",onClick:()=>{i(""),d(null)},className:"search-clear",children:"✕"})]}),(0,a.jsx)("button",{type:"submit",className:"search-button",disabled:r||!l.trim(),children:r?"\uD83D\uDD0D...":"Search"})]}),o&&(0,a.jsx)("div",{className:"search-error",children:o})]})},y=e=>{let{onLocationFound:s}=e,[n,l]=(0,t.useState)(!1);return(0,a.jsx)("button",{className:"near-me-button",onClick:()=>{"geolocation"in navigator?(l(!0),navigator.geolocation.getCurrentPosition(e=>{s({lat:e.coords.latitude,lon:e.coords.longitude,isUserLocation:!0}),l(!1)},()=>{console.log("Location access denied or unavailable"),alert("Could not get your location. Please enable location services."),l(!1)},{enableHighAccuracy:!1,timeout:5e3,maximumAge:3e5})):alert("Geolocation is not supported by your browser")},disabled:n,title:"Find parks near me",children:(0,a.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"6"}),(0,a.jsx)("line",{x1:"12",y1:"18",x2:"12",y2:"22"}),(0,a.jsx)("line",{x1:"2",y1:"12",x2:"6",y2:"12"}),(0,a.jsx)("line",{x1:"18",y1:"12",x2:"22",y2:"12"}),(0,a.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})})},f=e=>{let{onClick:s,activeFilterCount:n}=e;return(0,a.jsxs)("button",{className:"filter-drawer-button",onClick:s,children:[(0,a.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),(0,a.jsx)("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),(0,a.jsx)("line",{x1:"4",y1:"18",x2:"20",y2:"18"}),(0,a.jsx)("circle",{cx:"18",cy:"6",r:"2",fill:"white"}),(0,a.jsx)("circle",{cx:"8",cy:"12",r:"2",fill:"white"}),(0,a.jsx)("circle",{cx:"15",cy:"18",r:"2",fill:"white"})]}),(0,a.jsx)("span",{children:"Filters"}),n>0&&(0,a.jsx)("span",{className:"filter-badge",children:n})]})},b=e=>{let{isOpen:s,onClose:n,filters:l,onFiltersChange:i}=e,[r,c]=(0,t.useState)(!1),[o,d]=(0,t.useState)(!0),[u,h]=(0,t.useState)(!1),m=e=>{i({...l,landType:e,agencies:"STATE"===e||"COUNTY"===e||"CITY"===e?[]:l.agencies})},p=e=>{let s=l.agencies.includes(e)?l.agencies.filter(s=>s!==e):[...l.agencies,e];i({...l,agencies:s,landType:s.length>0?"ALL":l.landType})};return s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"filter-drawer-backdrop",onClick:n}),(0,a.jsxs)("div",{className:"filter-drawer open",children:[(0,a.jsxs)("div",{className:"filter-drawer-header",children:[(0,a.jsx)("h2",{children:"Filters"}),(0,a.jsx)("button",{className:"filter-drawer-close",onClick:n,children:"✕"})]}),(0,a.jsxs)("div",{className:"filter-drawer-content",children:[(0,a.jsxs)("div",{className:"filter-section",children:[(0,a.jsxs)("button",{className:"filter-section-header",onClick:()=>c(!r),children:[(0,a.jsxs)("span",{className:"filter-section-title",children:["\uD83C\uDFAF Amenities",l.amenities.length>0&&(0,a.jsxs)("span",{className:"filter-count",children:[" ","(",l.amenities.length,")"]})]}),(0,a.jsx)("span",{className:"filter-section-arrow",children:r?"▼":"▶"})]}),r&&(0,a.jsx)("div",{className:"filter-section-content",children:x.$.amenities.map(e=>(0,a.jsxs)("label",{className:"filter-option",children:[(0,a.jsx)("input",{type:"checkbox",checked:l.amenities.includes(e.key),onChange:()=>(e=>{let s=l.amenities.includes(e)?l.amenities.filter(s=>s!==e):[...l.amenities,e];i({...l,amenities:s})})(e.key)}),(0,a.jsx)("span",{children:e.label})]},e.key))})]}),(0,a.jsxs)("div",{className:"filter-section",children:[(0,a.jsxs)("button",{className:"filter-section-header",onClick:()=>d(!o),children:[(0,a.jsxs)("span",{className:"filter-section-title",children:["Land Type","ALL"!==l.landType&&(0,a.jsx)("span",{className:"filter-count",children:" (1)"})]}),(0,a.jsx)("span",{className:"filter-section-arrow",children:o?"▼":"▶"})]}),o&&(0,a.jsxs)("div",{className:"filter-section-content",children:[(0,a.jsxs)("label",{className:"filter-option",children:[(0,a.jsx)("input",{type:"radio",name:"landType",checked:"ALL"===l.landType,onChange:()=>m("ALL")}),(0,a.jsx)("span",{children:"Show All"})]}),(0,a.jsxs)("label",{className:"filter-option",children:[(0,a.jsx)("input",{type:"radio",name:"landType",checked:"FEDERAL"===l.landType,onChange:()=>m("FEDERAL")}),(0,a.jsx)("span",{children:"Federal Lands Only"})]}),(0,a.jsxs)("label",{className:"filter-option",children:[(0,a.jsx)("input",{type:"radio",name:"landType",checked:"STATE"===l.landType,onChange:()=>m("STATE")}),(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"legend-dot",style:{backgroundColor:x.$.markerColors.State}}),"State Parks Only"]})]}),(0,a.jsxs)("label",{className:"filter-option",children:[(0,a.jsx)("input",{type:"radio",name:"landType",checked:"COUNTY"===l.landType,onChange:()=>m("COUNTY")}),(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"legend-dot",style:{backgroundColor:x.$.markerColors.COUNTY}}),"County Parks Only"]})]}),(0,a.jsxs)("label",{className:"filter-option",children:[(0,a.jsx)("input",{type:"radio",name:"landType",checked:"CITY"===l.landType,onChange:()=>m("CITY")}),(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"legend-dot",style:{backgroundColor:x.$.markerColors.CITY}}),"City Parks Only"]})]})]})]}),(0,a.jsxs)("div",{className:"filter-section",children:[(0,a.jsxs)("button",{className:"filter-section-header",onClick:()=>h(!u),children:[(0,a.jsxs)("span",{className:"filter-section-title",children:["Federal Agencies",l.agencies.length>0&&(0,a.jsxs)("span",{className:"filter-count",children:[" ","(",l.agencies.length,")"]})]}),(0,a.jsx)("span",{className:"filter-section-arrow",children:u?"▼":"▶"})]}),u&&(0,a.jsxs)("div",{className:"filter-section-content",children:[(0,a.jsxs)("label",{className:"filter-option",children:[(0,a.jsx)("input",{type:"checkbox",checked:l.agencies.includes("NPS"),onChange:()=>p("NPS"),disabled:["STATE","COUNTY","CITY"].includes(l.landType)}),(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"legend-dot",style:{backgroundColor:x.$.markerColors.NPS}}),"National Parks (NPS)"]})]}),(0,a.jsxs)("label",{className:"filter-option",children:[(0,a.jsx)("input",{type:"checkbox",checked:l.agencies.includes("USFS"),onChange:()=>p("USFS"),disabled:["STATE","COUNTY","CITY"].includes(l.landType)}),(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"legend-dot",style:{backgroundColor:x.$.markerColors.USFS}}),"National Forests (USFS)"]})]}),(0,a.jsxs)("label",{className:"filter-option",children:[(0,a.jsx)("input",{type:"checkbox",checked:l.agencies.includes("FWS"),onChange:()=>p("FWS"),disabled:["STATE","COUNTY","CITY"].includes(l.landType)}),(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"legend-dot",style:{backgroundColor:x.$.markerColors.FWS}}),"Fish & Wildlife (FWS)"]})]}),(0,a.jsxs)("label",{className:"filter-option",children:[(0,a.jsx)("input",{type:"checkbox",checked:l.agencies.includes("BLM"),onChange:()=>p("BLM"),disabled:["STATE","COUNTY","CITY"].includes(l.landType)}),(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"legend-dot",style:{backgroundColor:x.$.markerColors.BLM}}),"Bureau of Land Management (BLM)"]})]})]})]})]}),(()=>{let e=0;return"ALL"!==l.landType&&e++,e+=l.agencies.length,e+=l.amenities.length})()>0&&(0,a.jsx)("div",{className:"filter-drawer-footer",children:(0,a.jsx)("button",{className:"clear-all-filters",onClick:()=>{i({landType:"ALL",agencies:[],amenities:[]})},children:"Clear All Filters"})})]})]}):null};var N=n(5704);let C=N.env.NEXT_PUBLIC_SUPABASE_URL,S=N.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,k=(0,r.UU)(C,S);async function v(e){let{data:s,error:n}=await k.from("parks").select("boundary").eq("id",e).single();if(n)return console.error("Error fetching boundary:",n),null;if(!s||!s.boundary)return null;try{let e=null;if("string"==typeof s.boundary){let n=JSON.parse(s.boundary);"Polygon"===n.type?e=n.coordinates[0]:"MultiPolygon"===n.type&&(e=n.coordinates[0][0])}else"Polygon"===s.boundary.type?e=s.boundary.coordinates[0]:"MultiPolygon"===s.boundary.type&&(e=s.boundary.coordinates[0][0]);if(e&&e.length>0)return e.map(e=>[e[1],e[0]])}catch(e){console.error("Error parsing boundary:",e)}return null}var T=n(2111);let _=e=>{let{park:s,onClose:n,onBoundaryToggle:l}=e,[i,r]=(0,t.useState)(null),[c,o]=(0,t.useState)(!0),[d,u]=(0,t.useState)(!1);(0,t.useEffect)(()=>{s&&h()},[s]);let h=async()=>{u(!0);try{let e=await v(s.id);r(e),l&&e&&l(e,!0)}catch(e){console.error("Error loading boundary:",e)}finally{u(!1)}};return s?(0,a.jsxs)("div",{className:"detail-panel",children:[(0,a.jsx)("button",{className:"close-button",onClick:n,children:"✕"}),(0,a.jsxs)("div",{className:"detail-content",children:[s.alerts&&s.alerts.length>0&&(0,a.jsxs)("div",{className:"alerts-banner",children:[(0,a.jsx)("div",{className:"alert-icon",children:"⚠️"}),(0,a.jsxs)("div",{className:"alert-content",children:[(0,a.jsx)("h3",{children:"Important Alerts"}),s.alerts.map((e,s)=>(0,a.jsxs)("div",{className:"alert-item",children:[(0,a.jsx)("strong",{children:e.title}),(0,a.jsx)("p",{children:e.description}),e.url&&(0,a.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:"More Info →"})]},s))]})]}),(0,a.jsx)("h2",{children:s.name}),(0,a.jsxs)("div",{className:"info-badges",children:[s.entrance_fees&&s.entrance_fees.length>0&&(0,a.jsx)("span",{className:"badge fee-badge",children:"0"===s.entrance_fees[0].cost||"0.00"===s.entrance_fees[0].cost?"\uD83C\uDFAB Free Entry":"\uD83D\uDCB0 $".concat(s.entrance_fees[0].cost)}),s.distance&&(0,a.jsxs)("span",{className:"badge distance-badge",children:["\uD83D\uDCCD ",s.distance.toFixed(1)," miles away"]}),i&&(0,a.jsx)("button",{className:"badge boundary-toggle ".concat(c?"active":""),onClick:()=>{let e=!c;o(e),l&&i&&l(i,e)},title:c?"Hide boundary":"Show boundary",children:c?"\uD83D\uDDFA Hide Boundary":"\uD83D\uDDFA Show Boundary"}),d&&(0,a.jsx)("span",{className:"badge",children:"Loading boundary..."})]}),s.description&&(0,a.jsxs)("div",{className:"detail-section description-section",children:[(0,a.jsx)("h3",{children:"About This Park"}),(0,a.jsx)("p",{children:s.description})]}),(0,a.jsxs)("div",{className:"detail-grid",children:[s.operating_hours&&(0,a.jsxs)("div",{className:"detail-section",children:[(0,a.jsx)("h3",{children:"\uD83D\uDD50 Hours Today"}),(0,a.jsx)("p",{className:"hours-today",children:(0,T.TF)(s.operating_hours)})]}),(s.phone||s.email)&&(0,a.jsxs)("div",{className:"detail-section",children:[(0,a.jsx)("h3",{children:"\uD83D\uDCDE Contact"}),s.phone&&(0,a.jsx)("p",{children:(0,a.jsx)("a",{href:"tel:".concat(s.phone),children:s.phone})}),s.email&&(0,a.jsx)("p",{children:(0,a.jsx)("a",{href:"mailto:".concat(s.email),children:s.email})})]})]}),s.amenities&&s.amenities.length>0&&(0,a.jsxs)("div",{className:"detail-section",children:[(0,a.jsx)("h3",{children:"\uD83C\uDFD5️ Amenities"}),(0,a.jsx)("div",{className:"activities-tags",children:s.amenities.map((e,s)=>(0,a.jsx)("span",{className:"activity-tag",children:e},s))})]}),s.activities&&s.activities.length>0&&(0,a.jsxs)("div",{className:"detail-section",children:[(0,a.jsx)("h3",{children:"\uD83E\uDD7E Activities"}),(0,a.jsx)("div",{className:"activities-tags",children:s.activities.map((e,s)=>(0,a.jsx)("span",{className:"activity-tag",children:e},s))})]}),(0,a.jsxs)("div",{className:"detail-section",children:[(0,a.jsx)("h3",{children:"Location"}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"State:"})," ",s.state]}),s.county&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"County:"})," ",s.county]}),s.city&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"City:"})," ",s.city]})]}),(0,a.jsxs)("div",{className:"detail-section",children:[(0,a.jsx)("h3",{children:"Management"}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Type:"})," ",(0,T.uf)(s.agency)]}),s.agency_full_name&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Managed By:"})," ",s.agency_full_name]})]}),(0,a.jsxs)("div",{className:"detail-grid",children:[s.acres&&(0,a.jsxs)("div",{className:"detail-section",children:[(0,a.jsx)("h3",{children:"Size"}),(0,a.jsxs)("p",{children:[Math.round(s.acres).toLocaleString()," acres"]})]}),s.designation_type&&(0,a.jsxs)("div",{className:"detail-section",children:[(0,a.jsx)("h3",{children:"Designation"}),(0,a.jsx)("p",{children:s.designation_type})]})]}),s.weather_info&&(0,a.jsxs)("div",{className:"detail-section",children:[(0,a.jsx)("h3",{children:"\uD83C\uDF24️ Weather Info"}),(0,a.jsx)("p",{children:s.weather_info})]}),s.directions_info&&(0,a.jsxs)("div",{className:"detail-section",children:[(0,a.jsx)("h3",{children:"\uD83D\uDE97 Getting There"}),(0,a.jsx)("p",{children:s.directions_info})]}),(0,a.jsxs)("div",{className:"detail-section action-links",children:[s.website&&(0,a.jsx)("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",className:"action-button primary",children:"Visit Official Website →"}),(0,a.jsx)("a",{href:"https://www.google.com/maps/search/?api=1&query=".concat(s.latitude,",").concat(s.longitude),target:"_blank",rel:"noopener noreferrer",className:"action-button secondary",children:"Get Directions"})]}),(0,a.jsx)("div",{className:"detail-section coordinates-section",children:(0,a.jsxs)("p",{className:"coordinates-text",children:[s.latitude.toFixed(4),", ",s.longitude.toFixed(4)]})})]})]}):null};var L=n(5704);let P=i()(()=>Promise.all([n.e(804),n.e(761),n.e(796)]).then(n.bind(n,8796)),{loadableGenerated:{webpack:()=>[8796]},ssr:!1}),w=i()(()=>Promise.all([n.e(761),n.e(150)]).then(n.bind(n,2150)),{loadableGenerated:{webpack:()=>[2150]},ssr:!1}),E=i()(()=>Promise.all([n.e(761),n.e(143)]).then(n.bind(n,4143)),{loadableGenerated:{webpack:()=>[4143]},ssr:!1});function F(){let e,{parks:s,loading:n,error:l,filters:i,setFilters:r,userLocation:c,setUserLocation:o,sortByDistance:d,setSortByDistance:u}=function(){let[e,s]=(0,t.useState)([]),[n,a]=(0,t.useState)(!0),[l,i]=(0,t.useState)(null),[r,c]=(0,t.useState)({landType:"ALL",agencies:[],amenities:[]}),[o,d]=(0,t.useState)(null),[u,m]=(0,t.useState)(!1);async function p(){a(!0),i(null);try{let e=await h();"STATE"===r.landType?e=e.filter(e=>e.agency&&e.agency.toLowerCase().includes("state")):"COUNTY"===r.landType?e=e.filter(e=>e.agency&&e.agency.toLowerCase().includes("county")):"CITY"===r.landType?e=e.filter(e=>e.agency&&(e.agency.toLowerCase().includes("city")||e.agency.toLowerCase().includes("municipal")||e.agency.toLowerCase().includes("town"))):"FEDERAL"===r.landType&&(e=e.filter(e=>["NPS","USFS","BLM","FWS"].includes(e.agency))),r.agencies.length>0&&(e=e.filter(e=>r.agencies.includes(e.agency))),r.amenities.length>0&&(e=e.filter(e=>!!e.amenities&&0!==e.amenities.length&&r.amenities.every(s=>e.amenities.some(e=>e.toLowerCase().includes(s.toLowerCase()))))),s(e)}catch(e){i(e.message),console.error("Error loading parks:",e)}finally{a(!1)}}return(0,t.useEffect)(()=>{p()},[r]),{parks:(0,t.useMemo)(()=>{let s=e;return o&&(s=e.map(e=>({...e,distance:function(e,s,n,a){let t=(n-e)*Math.PI/180,l=(a-s)*Math.PI/180,i=Math.sin(t/2)*Math.sin(t/2)+Math.cos(e*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*3959}(o.lat,o.lon,e.latitude,e.longitude)}))),u&&o&&(s=[...s].sort((e,s)=>(e.distance||1/0)-(s.distance||1/0))),s},[e,o,u]),loading:n,error:l,filters:r,setFilters:c,userLocation:o,setUserLocation:d,sortByDistance:u,setSortByDistance:m,refetch:p}}(),[x,N]=(0,t.useState)(m.map.defaultCenter),[C,S]=(0,t.useState)(m.map.defaultZoom),[k,v]=(0,t.useState)(null),[T,F]=(0,t.useState)(!1),[A,M]=(0,t.useState)(null),[U,O]=(0,t.useState)(!0),D=(0,t.useCallback)(e=>{o(e),N([e.lat,e.lon]),S(m.map.nearMeZoom),u(!0)},[o,u]),B=(0,t.useCallback)(e=>{v(e),N([e.latitude,e.longitude]),S(m.map.detailZoom)},[]),I=(0,t.useCallback)(()=>{v(null),M(null),S(c?m.map.nearMeZoom:m.map.defaultZoom)},[c]),Y=(0,t.useCallback)((e,s)=>{M(e),O(s)},[]),W=L.env.NEXT_PUBLIC_MAPBOX_TOKEN;return n?(0,a.jsxs)("div",{className:"app",children:[(0,a.jsx)(p,{}),(0,a.jsx)("div",{className:"loading",children:"Loading parks..."})]}):l?(0,a.jsxs)("div",{className:"app",children:[(0,a.jsx)(p,{}),(0,a.jsxs)("div",{className:"error",children:["Error loading parks: ",l]})]}):(0,a.jsxs)("div",{className:"app",children:[(0,a.jsx)(p,{}),(0,a.jsx)(j,{onLocationFound:D,mapboxToken:W}),(0,a.jsx)(f,{onClick:()=>F(!0),activeFilterCount:(e=0,"ALL"!==i.landType&&e++,e+=i.agencies.length,e+=i.amenities.length)}),(0,a.jsx)(y,{onLocationFound:D}),(0,a.jsx)(b,{isOpen:T,onClose:()=>F(!1),filters:i,onFiltersChange:r}),(0,a.jsxs)("div",{className:"main-content",children:[(0,a.jsx)("div",{className:"map-container",children:(0,a.jsxs)(P,{center:x,zoom:C,children:[s.map(e=>(0,a.jsx)(w,{park:e,onDetailsClick:B},e.id)),A&&U&&k&&(0,a.jsx)(E,{boundary:A,visible:U})]})}),k&&(0,a.jsx)(_,{park:k,onClose:I,onBoundaryToggle:Y})]}),(0,a.jsx)(g,{parkCount:s.length,sortedByDistance:d})]})}},2111:(e,s,n)=>{"use strict";function a(e){if(!e)return"FEDERAL";let s=e.toLowerCase();return s.includes("state")?"State":s.includes("county")?"COUNTY":s.includes("city")||s.includes("municipal")||s.includes("town")?"CITY":"NPS"===e?"NPS":"USFS"===e?"USFS":"BLM"===e?"BLM":"FWS"===e?"FWS":"FEDERAL"}function t(e){return({State:"State Park",COUNTY:"County Park",CITY:"City Park",NPS:"National Park Service",USFS:"U.S. Forest Service",BLM:"Bureau of Land Management",FWS:"Fish & Wildlife Service",FEDERAL:"Federal Land"})[a(e)]||e}function l(e){if(!e||0===e.length)return null;let s=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][new Date().getDay()];return e[0][s]||"Hours not available"}n.d(s,{TF:()=>l,bW:()=>a,uf:()=>t})},2846:(e,s,n)=>{"use strict";n.d(s,{$:()=>a});let a={map:{defaultCenter:[35.5,-83],defaultZoom:7,nearMeZoom:10,detailZoom:12,minZoom:4,maxZoom:18},markerColors:{State:"#4a7c2f",COUNTY:"#0891b2",CITY:"#eab308",NPS:"#2563eb",USFS:"#92400e",BLM:"#ea580c",FWS:"#9333ea",FEDERAL:"#6b7280"},api:{scrape:"/api/scrape",sync:"/api/sync",upload:"/api/upload"},search:{debounceMs:300,minChars:2},amenities:[{key:"camping",label:"\uD83C\uDFD5️ Camping"},{key:"hiking",label:"\uD83E\uDD7E Hiking"},{key:"fishing",label:"\uD83C\uDFA3 Fishing"},{key:"swimming",label:"\uD83C\uDFCA Swimming"},{key:"boating",label:"⛵ Boating"},{key:"picnicking",label:"\uD83E\uDDFA Picnic Areas"},{key:"playground",label:"\uD83D\uDEDD Playground"},{key:"visitor center",label:"\uD83C\uDFDB️ Visitor Center"},{key:"restrooms",label:"\uD83D\uDEBB Restrooms"}],agencies:{federal:["NPS","USFS","BLM","FWS"],state:["State"],local:["COUNTY","CITY"]}}},4054:(e,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),!function(e,s){for(var n in s)Object.defineProperty(e,n,{enumerable:!0,get:s[n]})}(s,{bindSnapshot:function(){return i},createAsyncLocalStorage:function(){return l},createSnapshot:function(){return r}});let n=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class a{disable(){throw n}getStore(){}run(){throw n}exit(){throw n}enterWith(){throw n}static bind(e){return e}}let t="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function l(){return t?new t:new a}function i(e){return t?t.bind(e):a.bind(e)}function r(){return t?t.snapshot():function(e,...s){return e(...s)}}},4437:(e,s,n)=>{"use strict";function a(e){let{reason:s,children:n}=e;return n}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"BailoutToCSR",{enumerable:!0,get:function(){return a}}),n(4553)},6249:(e,s,n)=>{Promise.resolve().then(n.bind(n,1740))},6278:(e,s,n)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return t}});let a=n(8140)._(n(1150));function t(e,s){var n;let t={};"function"==typeof e&&(t.loader=e);let l={...t,...s};return(0,a.default)({...l,modules:null==(n=l.loadableGenerated)?void 0:n.modules})}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),e.exports=s.default)},6552:(e,s,n)=>{"use strict";function a(e){let{moduleIds:s}=e;return null}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"PreloadChunks",{enumerable:!0,get:function(){return a}}),n(5155),n(7650),n(8567),n(7278)},7828:(e,s,n)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"workAsyncStorageInstance",{enumerable:!0,get:function(){return a}});let a=(0,n(4054).createAsyncLocalStorage)()},8567:(e,s,n)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"workAsyncStorage",{enumerable:!0,get:function(){return a.workAsyncStorageInstance}});let a=n(7828)}},e=>{e.O(0,[993,441,255,358],()=>e(e.s=6249)),_N_E=e.O()}]);
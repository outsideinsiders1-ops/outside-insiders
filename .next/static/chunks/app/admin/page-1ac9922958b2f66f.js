(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{4180:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var i=t(5155),r=t(2115),a=t(1993);t(6255);var n=t(5704);let l=n.env.NEXT_PUBLIC_SUPABASE_URL||"",d=n.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"",o=l&&d?(0,a.UU)(l,d):null,c=function(){let[e,s]=(0,r.useState)("scraper"),[t,a]=(0,r.useState)([]),[n,l]=(0,r.useState)([]),[d,c]=(0,r.useState)([]),[p,u]=(0,r.useState)([]),[h,x]=(0,r.useState)(!0),[g,y]=(0,r.useState)(""),[m,j]=(0,r.useState)(""),[f,b]=(0,r.useState)(""),[v,S]=(0,r.useState)(""),[k,D]=(0,r.useState)("state"),[P,A]=(0,r.useState)(!1),[C,N]=(0,r.useState)(null),[w,T]=(0,r.useState)(null),[F,E]=(0,r.useState)({counties:0,cities:0}),[I,_]=(0,r.useState)(null),[q,z]=(0,r.useState)("State Agency"),[U,B]=(0,r.useState)(""),[R,L]=(0,r.useState)(!1),[M,O]=(0,r.useState)(null),[W,Q]=(0,r.useState)(null),[K,G]=(0,r.useState)(""),[H,J]=(0,r.useState)("NPS"),[Y,X]=(0,r.useState)(""),[Z,V]=(0,r.useState)(!1),[$,ee]=(0,r.useState)(null),[es,et]=(0,r.useState)(null),[ei,er]=(0,r.useState)(!1),[ea,en]=(0,r.useState)(null),[el,ed]=(0,r.useState)(null),[eo,ec]=(0,r.useState)({state:"",agency:"",dataSource:""}),[ep,eu]=(0,r.useState)([]),[eh,ex]=(0,r.useState)(new Set),[eg,ey]=(0,r.useState)(!1);(0,r.useEffect)(()=>{em()},[]);let em=async()=>{if(!o){console.error("Supabase client not initialized"),x(!1);return}x(!0);try{let{data:e,error:s}=await o.from("geographic_entities").select("id, name, state_code").eq("entity_type","state").order("name");if(s)throw s;e&&e.length>0&&a(e)}catch(e){console.error("Error loading states:",e)}finally{x(!1)}},ej=async e=>{if(o)try{let{data:s,error:t}=await o.from("geographic_entities").select("id, name, metro_id").eq("entity_type","metro").eq("state_code",e).order("name");if(t)throw t;s&&s.length>0?l(s):l([])}catch(e){console.error("Error loading metros:",e),l([])}},ef=async e=>{if(o)try{let{data:s,error:t}=await o.from("geographic_entities").select("id, name").eq("entity_type","county").eq("state_code",e).order("name");if(t)throw t;s&&s.length>0?c(s):c([])}catch(e){console.error("Error loading counties:",e),c([])}},eb=async e=>{if(o)try{let{data:s,error:t}=await o.from("geographic_entities").select("id, name").eq("entity_type","city").eq("state_code",e).order("name");if(t)throw t;s&&s.length>0?u(s):u([])}catch(e){console.error("Error loading cities:",e),u([])}},ev=async(e,s)=>{try{if(!o)return;let{data:t}=await o.from("geographic_entities").select("id").eq("entity_type","county").eq("metro_id",e).eq("state_code",s),{data:i}=await o.from("geographic_entities").select("id").eq("entity_type","city").eq("metro_id",e).eq("state_code",s);E({counties:t?t.length:0,cities:i?i.length:0})}catch(e){console.error("Error loading metro details:",e),E({counties:0,cities:0})}},eS=async(e,s)=>{y(e),j(""),b(""),S(""),E({counties:0,cities:0}),s?(await ej(s),await ef(s),await eb(s)):(l([]),c([]),u([]))},ek=async e=>{if(j(e),e){let s=n.find(s=>s.name===e),i=t.find(e=>e.name===g);s&&i&&await ev(s.metro_id,i.state_code)}else E({counties:0,cities:0})},eD=e=>{D(e),j(""),b(""),S(""),E({counties:0,cities:0})},eP=async()=>{let e={type:k,state:g};if("state"===k){if(!g)return void T("Please select a state");e.name=g}else if("metro"===k){if(!m)return void T("Please select a metro area");let s=n.find(e=>e.name===m);e.name=m,e.metroId=null==s?void 0:s.metro_id}else if("county"===k){if(!f)return void T("Please select a county");e.name=f}else if("city"===k){if(!v)return void T("Please select a city");e.name=v}A(!0),T(null),N(null);try{let s=await fetch("/api/scrape",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await s.json();s.ok&&t.success?N(t):T(t.error||"Scraping failed")}catch(e){T("Error: ".concat(e.message))}finally{A(!1)}},eA=async()=>{if(!I)return void Q("Please select a file");if(!o)return void Q("Supabase client not initialized");L(!0),Q(null),O(null);let e=null;try{let s="".concat(Date.now(),"-").concat(I.name);e="uploads/".concat(s),console.log("Uploading ".concat(I.name," (").concat((I.size/1024/1024).toFixed(2)," MB) to Supabase Storage..."));let{error:t}=await o.storage.from("park-uploads").upload(e,I,{cacheControl:"3600",upsert:!1});if(t){if(t.message.includes("Bucket not found")||t.message.includes("not found"))return void Q('Storage bucket "park-uploads" not found. Please create it in Supabase Dashboard > Storage.');throw t}let{data:i}=o.storage.from("park-uploads").getPublicUrl(e),r=i.publicUrl;console.log("File uploaded to storage, processing...");let a=new FormData;a.append("fileUrl",r),a.append("sourceType",q),a.append("sourceName",I.name),a.append("filePath",e),U&&a.append("defaultState",U.trim());let n=new AbortController,l=setTimeout(()=>n.abort(),3e5),d=await fetch("/api/upload",{method:"POST",body:a,signal:n.signal});if(clearTimeout(l),!d.ok){let e="Upload failed with status ".concat(d.status);try{e=(await d.json()).error||e}catch(s){e=d.statusText||e}Q(e);return}let c=await d.json();if(c.success){O(c),_(null);let e=document.querySelector('input[type="file"]');e&&(e.value="")}else if(Q(c.error||"Upload failed"),e)try{await o.storage.from("park-uploads").remove([e])}catch(e){console.warn("Failed to cleanup storage file on error:",e)}}catch(s){if(console.error("Upload error:",s),e)try{await o.storage.from("park-uploads").remove([e])}catch(e){console.warn("Failed to cleanup storage file on error:",e)}"AbortError"===s.name?Q("Upload timed out after 5 minutes. The file may be too large. Please try splitting it into smaller files or contact support."):Q("Network error: ".concat(s.message,". Please check your connection and try again."))}finally{L(!1)}},eC=async()=>{if(!K.trim())return void et("Please enter an API URL");if(!H)return void et("Please select a source type");V(!0),et(null),ee(null);try{let e=await fetch("/api/sync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiUrl:K.trim(),sourceType:H,apiKey:Y.trim()||void 0})}),s=await e.json();if(ee(null),et(null),!e.ok){let t=s.error||"Sync failed with status ".concat(e.status);if(s.details&&(t+=": ".concat(s.details)),400===e.status)s.example&&(t+="\n\nExample: ".concat(JSON.stringify(s.example,null,2)));else if(501===e.status){t="API Sync is not yet implemented. This endpoint is coming soon.",s.note&&(t+="\n\n".concat(s.note)),s.nextSteps&&(t+="\n\nPlanned features:\n".concat(s.nextSteps.map((e,s)=>"".concat(s+1,". ").concat(e)).join("\n"))),et(t);return}else 500===e.status&&(t="Server error: ".concat(s.message||t),s.details);et(t);return}!0===s.success?ee(s):et(s.error||s.message||"Sync failed")}catch(e){console.error("API Sync error:",e),"TypeError"===e.name&&e.message.includes("fetch")?et("Network error: Could not connect to server. Please check your connection and try again."):et("Error: ".concat(e.message,". Please try again."))}finally{V(!1)}},eN=async()=>{er(!0),ed(null);try{let e=new URLSearchParams;eo.state&&e.append("state",eo.state),eo.agency&&e.append("agency",eo.agency),eo.dataSource&&e.append("data_source",eo.dataSource);let s=await fetch("/api/admin/data-quality?".concat(e.toString())),t=await s.json();if(!s.ok)return void ed(t.error||"Failed to load quality analysis");t.success?en(t.analysis):ed(t.error||"Failed to load quality analysis")}catch(e){console.error("Quality analysis error:",e),ed("Error: ".concat(e.message))}finally{er(!1)}},ew=async e=>{er(!0),ed(null);try{let s=new URLSearchParams;eo.state&&s.append("state",eo.state),eo.agency&&s.append("agency",eo.agency),eo.dataSource&&s.append("data_source",eo.dataSource),s.append("action","filter"),e.nameKeywords&&s.append("nameKeywords",e.nameKeywords.join(",")),void 0!==e.maxAcres&&s.append("maxAcres",e.maxAcres),void 0!==e.minAcres&&s.append("minAcres",e.minAcres),e.missingFields&&s.append("missingFields",e.missingFields.join(","));let t=await fetch("/api/admin/data-quality?".concat(s.toString())),i=await t.json();if(!t.ok)return void ed(i.error||"Failed to load filtered parks");i.success?(eu(i.filteredParks||[]),ex(new Set)):ed(i.error||"Failed to load filtered parks")}catch(e){console.error("Filter parks error:",e),ed("Error: ".concat(e.message))}finally{er(!1)}},eT=async()=>{if(0===eh.size)return void alert("Please select parks to delete");if(confirm("Are you sure you want to delete ".concat(eh.size," park(s)? This cannot be undone."))){ey(!0);try{let e=await fetch("/api/admin/data-quality",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({parkIds:Array.from(eh)})}),s=await e.json();if(!e.ok)return void ed(s.error||"Failed to delete parks");s.success&&(alert("Successfully deleted ".concat(s.deleted," park(s)")),ex(new Set),eN(),ep.length>0&&ew({}))}catch(e){console.error("Delete parks error:",e),ed("Error: ".concat(e.message))}finally{ey(!1)}}},eF=e=>{let s=new Set(eh);s.has(e)?s.delete(e):s.add(e),ex(s)},eE=()=>{eh.size===ep.length?ex(new Set):ex(new Set(ep.map(e=>e.id)))};return(0,i.jsxs)("div",{className:"admin-panel",children:[(0,i.jsxs)("div",{className:"admin-header",children:[(0,i.jsx)("h1",{children:"\uD83C\uDFDE️ Outside Insiders Admin Panel"}),(0,i.jsx)("p",{children:"Manage park data sources"})]}),(0,i.jsxs)("div",{className:"tab-navigation",children:[(0,i.jsx)("button",{className:"tab ".concat("scraper"===e?"active":""),onClick:()=>s("scraper"),children:"\uD83C\uDF10 Web Scraper"}),(0,i.jsx)("button",{className:"tab ".concat("api"===e?"active":""),onClick:()=>s("api"),children:"\uD83D\uDD0C API Manager"}),(0,i.jsx)("button",{className:"tab ".concat("upload"===e?"active":""),onClick:()=>s("upload"),children:"\uD83D\uDCC1 File Upload"}),(0,i.jsx)("button",{className:"tab ".concat("quality"===e?"active":""),onClick:()=>{s("quality"),ea||eN()},children:"\uD83D\uDD0D Data Quality"})]}),(0,i.jsxs)("div",{className:"tab-content",children:["scraper"===e&&(0,i.jsxs)("div",{className:"section",children:[(0,i.jsx)("h2",{children:"Web Scraper"}),(0,i.jsx)("p",{className:"section-description",children:"Scrape park data from websites. Priority: 40 (can't overwrite API or file data)"}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"1️⃣ Select State:"}),(0,i.jsxs)("select",{value:g,onChange:e=>{let s=t.find(s=>s.name===e.target.value);eS(e.target.value,null==s?void 0:s.state_code)},disabled:P||h,children:[(0,i.jsx)("option",{value:"",children:"-- Select a State --"}),t.map(e=>(0,i.jsxs)("option",{value:e.name,children:[e.name," (",e.state_code,")"]},e.id))]})]}),g&&(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"2️⃣ What to Scrape:"}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,i.jsxs)("label",{style:{cursor:"pointer",padding:"5px"},children:[(0,i.jsx)("input",{type:"radio",value:"state",checked:"state"===k,onChange:e=>eD(e.target.value),disabled:P}),(0,i.jsxs)("span",{style:{marginLeft:"8px"},children:[(0,i.jsx)("strong",{children:"State Parks"})," - All state parks in ",g]})]}),(0,i.jsxs)("label",{style:{cursor:"pointer",padding:"5px",background:"#e8f4f8"},children:[(0,i.jsx)("input",{type:"radio",value:"metro",checked:"metro"===k,onChange:e=>eD(e.target.value),disabled:P}),(0,i.jsxs)("span",{style:{marginLeft:"8px"},children:[(0,i.jsx)("strong",{children:"Metro Area"})," - All counties + cities in a metro (bulk)"]})]}),(0,i.jsxs)("label",{style:{cursor:"pointer",padding:"5px"},children:[(0,i.jsx)("input",{type:"radio",value:"county",checked:"county"===k,onChange:e=>eD(e.target.value),disabled:P}),(0,i.jsxs)("span",{style:{marginLeft:"8px"},children:[(0,i.jsx)("strong",{children:"Single County"})," - One specific county"]})]}),(0,i.jsxs)("label",{style:{cursor:"pointer",padding:"5px"},children:[(0,i.jsx)("input",{type:"radio",value:"city",checked:"city"===k,onChange:e=>eD(e.target.value),disabled:P}),(0,i.jsxs)("span",{style:{marginLeft:"8px"},children:[(0,i.jsx)("strong",{children:"Single City"})," - One specific city"]})]})]})]}),"metro"===k&&g&&(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"3️⃣ Select Metro Area:"}),(0,i.jsxs)("select",{value:m,onChange:e=>ek(e.target.value),disabled:P||0===n.length,children:[(0,i.jsx)("option",{value:"",children:"-- Select a Metro Area --"}),n.map(e=>(0,i.jsx)("option",{value:e.name,children:e.name},e.id))]}),m&&F&&(0,i.jsxs)("div",{style:{marginTop:"10px",padding:"10px",background:"#f0f7ed",borderRadius:"5px"},children:[(0,i.jsx)("strong",{children:"This metro includes:"}),(0,i.jsxs)("ul",{style:{margin:"5px 0"},children:[(0,i.jsxs)("li",{children:[F.counties," counties"]}),(0,i.jsxs)("li",{children:[F.cities," cities"]}),(0,i.jsx)("li",{children:(0,i.jsxs)("strong",{children:["Total: ",F.counties+F.cities," entities to scrape"]})})]})]})]}),"county"===k&&g&&(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"3️⃣ Select County:"}),(0,i.jsxs)("select",{value:f,onChange:e=>b(e.target.value),disabled:P||0===d.length,children:[(0,i.jsx)("option",{value:"",children:"-- Select a County --"}),d.map(e=>(0,i.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),"city"===k&&g&&(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"3️⃣ Select City:"}),(0,i.jsxs)("select",{value:v,onChange:e=>S(e.target.value),disabled:P||0===p.length,children:[(0,i.jsx)("option",{value:"",children:"-- Select a City --"}),p.map(e=>(0,i.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,i.jsx)("button",{onClick:eP,disabled:P||!g||"metro"===k&&!m||"county"===k&&!f||"city"===k&&!v,className:"primary-button",style:{marginTop:"20px"},children:P?"\uD83D\uDD04 Scraping...":"\uD83D\uDE80 Start Scrape"}),g&&(0,i.jsxs)("div",{style:{marginTop:"10px",padding:"15px",background:"#f8f9fa",borderRadius:"5px"},children:[(0,i.jsx)("strong",{children:"Ready to scrape:"}),"state"===k&&(0,i.jsxs)("p",{children:["All state parks in ",g]}),"metro"===k&&m&&(0,i.jsxs)("p",{children:[F.counties+F.cities," locations in ",m]}),"county"===k&&f&&(0,i.jsxs)("p",{children:["County parks in ",f,", ",g]}),"city"===k&&v&&(0,i.jsxs)("p",{children:["City parks in ",v,", ",g]})]}),w&&(0,i.jsxs)("div",{className:"alert alert-error",children:["❌ ",w]}),C&&(0,i.jsxs)("div",{className:"alert alert-success",children:["✅ Success! ",C.message,void 0!==C.parksFound&&(0,i.jsxs)("div",{className:"result-details",children:[(0,i.jsxs)("p",{children:["Parks found: ",C.parksFound]}),(0,i.jsxs)("p",{children:["Parks added: ",C.parksAdded||0]}),(0,i.jsxs)("p",{children:["Parks updated: ",C.parksUpdated||0]}),(0,i.jsxs)("p",{children:["Parks skipped (protected): ",C.parksSkipped||0]})]})]}),(0,i.jsxs)("div",{style:{marginTop:"30px",padding:"20px",background:"#e8f4f8",borderRadius:"8px"},children:[(0,i.jsx)("h4",{children:"\uD83D\uDCCA Geographic Data Summary:"}),(0,i.jsxs)("ul",{style:{lineHeight:"1.8"},children:[(0,i.jsxs)("li",{children:["Total States: ",t.length]}),g&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("li",{children:["Metros in ",g,": ",n.length]}),(0,i.jsxs)("li",{children:["Counties in ",g,": ",d.length]}),(0,i.jsxs)("li",{children:["Cities in ",g,": ",p.length]})]})]})]}),(0,i.jsxs)("div",{style:{marginTop:"20px",padding:"20px",background:"#f0f7ed",borderRadius:"8px"},children:[(0,i.jsx)("h4",{children:"\uD83C\uDFAF Data Protection System:"}),(0,i.jsxs)("ul",{style:{lineHeight:"1.8"},children:[(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Quality Score:"})," 0-100 points based on completeness"]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Priority:"})," API (100) → Files (80) → Scrapes (40)"]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Protection:"})," High-quality data never overwritten"]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Updates:"})," Only if quality improves"]})]})]})]}),"api"===e&&(0,i.jsxs)("div",{className:"section",children:[(0,i.jsx)("h2",{children:"API Manager"}),(0,i.jsx)("p",{className:"section-description",children:"Connect to official park APIs. Priority: 90-100 (highest protection)"}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"1️⃣ Select Source Type:"}),(0,i.jsxs)("select",{value:H,onChange:e=>J(e.target.value),disabled:Z,children:[(0,i.jsx)("option",{value:"NPS",children:"NPS (National Park Service) - Priority: 100"}),(0,i.jsx)("option",{value:"Recreation.gov",children:"Recreation.gov - Priority: 95"}),(0,i.jsx)("option",{value:"State Agency",children:"State Agency API - Priority: 90"}),(0,i.jsx)("option",{value:"Federal Agency",children:"Federal Agency API - Priority: 90"}),(0,i.jsx)("option",{value:"County Agency",children:"County Agency API - Priority: 85"}),(0,i.jsx)("option",{value:"City Agency",children:"City Agency API - Priority: 85"})]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"2️⃣ Enter API URL:"}),(0,i.jsx)("input",{type:"url",value:K,onChange:e=>{G(e.target.value),et(null)},placeholder:"https://api.nps.gov/api/v1/parks",disabled:Z,style:{width:"100%",padding:"8px",marginTop:"5px",fontFamily:"monospace"}}),(0,i.jsxs)("p",{style:{marginTop:"5px",fontSize:"0.9rem",color:"#666"},children:[(0,i.jsx)("strong",{children:"Examples:"}),(0,i.jsx)("br",{}),"• NPS: ",(0,i.jsx)("code",{children:"https://api.nps.gov/api/v1/parks"}),(0,i.jsx)("br",{}),"• Recreation.gov: ",(0,i.jsx)("code",{children:"https://ridb.recreation.gov/api/v1/facilities"}),(0,i.jsx)("br",{}),"• State APIs: Check your state's park agency website"]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"3️⃣ API Key (if required):"}),(0,i.jsx)("input",{type:"password",value:Y,onChange:e=>X(e.target.value),placeholder:"Enter API key if required by the API",disabled:Z,style:{width:"100%",padding:"8px",marginTop:"5px"}}),(0,i.jsxs)("p",{style:{marginTop:"5px",fontSize:"0.9rem",color:"#666"},children:[(0,i.jsx)("strong",{children:"Note:"})," Some APIs require authentication. Enter your API key here if needed."]})]}),(0,i.jsx)("div",{className:"form-group",children:(0,i.jsx)("button",{onClick:eC,disabled:!K.trim()||!H||Z,className:"primary-button",children:Z?"⏳ Syncing...":"\uD83D\uDD0C Sync API"})}),es&&(0,i.jsxs)("div",{className:"error-message",style:{marginTop:"20px",padding:"15px",background:"#fee",borderRadius:"8px",whiteSpace:"pre-wrap"},children:[(0,i.jsx)("strong",{children:"❌ Error:"}),(0,i.jsx)("div",{style:{marginTop:"10px",fontFamily:"monospace",fontSize:"0.9rem"},children:es})]}),$&&(0,i.jsx)("div",{className:"success-message",style:{marginTop:"20px",padding:"20px",background:"#f0f7ed",borderRadius:"8px"},children:$.success?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h3",{style:{marginTop:0},children:"✅ Sync Complete!"}),(0,i.jsxs)("ul",{style:{textAlign:"left",display:"inline-block"},children:[void 0!==$.parksFound&&(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Parks Found:"})," ",$.parksFound]}),void 0!==$.parksAdded&&(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Parks Added:"})," ",$.parksAdded]}),void 0!==$.parksUpdated&&(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Parks Updated:"})," ",$.parksUpdated]})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h3",{style:{marginTop:0},children:"ℹ️ API Sync Status"}),(0,i.jsx)("p",{children:$.message||"API sync endpoint received your request"}),$.received&&(0,i.jsxs)("div",{style:{marginTop:"10px",padding:"10px",background:"#fff",borderRadius:"5px"},children:[(0,i.jsx)("strong",{children:"Received:"}),(0,i.jsxs)("ul",{style:{textAlign:"left",marginTop:"5px"},children:[(0,i.jsxs)("li",{children:["URL: ",$.received.apiUrl]}),(0,i.jsxs)("li",{children:["Source Type: ",$.received.sourceType]}),(0,i.jsxs)("li",{children:["Has API Key: ",$.received.hasApiKey?"Yes":"No"]})]})]}),$.note&&(0,i.jsx)("p",{style:{marginTop:"10px",fontStyle:"italic",color:"#666"},children:$.note})]})}),(0,i.jsxs)("div",{style:{marginTop:"30px",padding:"20px",background:"#e8f4f8",borderRadius:"8px"},children:[(0,i.jsx)("h4",{children:"\uD83D\uDCCB API Sync Features (Coming Soon):"}),(0,i.jsxs)("ul",{style:{lineHeight:"1.8",textAlign:"left"},children:[(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"LLM-Powered Intelligence:"})," Automatically analyzes API structure and suggests optimal endpoints"]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Smart Field Mapping:"})," Maps API response fields to park schema automatically"]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Deduplication:"})," Intelligently merges with existing park data"]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Priority Protection:"})," API data has highest priority (90-100) and won't be overwritten"]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Error Recovery:"})," Handles API errors gracefully and provides detailed feedback"]})]})]})]}),"upload"===e&&(0,i.jsxs)("div",{className:"section",children:[(0,i.jsx)("h2",{children:"File Upload"}),(0,i.jsx)("p",{className:"section-description",children:"Upload GeoJSON or Shapefile files. Priority: 80 (protected from scrapes). Files will be intelligently merged with existing data. Large files may take several minutes to process."}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"1️⃣ Select Source Type:"}),(0,i.jsxs)("select",{value:q,onChange:e=>z(e.target.value),disabled:R,children:[(0,i.jsx)("option",{value:"Public Federal",children:"Public Federal"}),(0,i.jsx)("option",{value:"Public State",children:"Public State"}),(0,i.jsx)("option",{value:"State Agency",children:"State Agency"}),(0,i.jsx)("option",{value:"County Agency",children:"County Agency"}),(0,i.jsx)("option",{value:"City Agency",children:"City Agency"})]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"2️⃣ Enter State (if not in file):"}),(0,i.jsx)("input",{type:"text",value:U,onChange:e=>B(e.target.value),placeholder:"e.g., Georgia, GA, or leave empty if file contains state",disabled:R,style:{width:"100%",padding:"8px",marginTop:"5px"}}),(0,i.jsxs)("p",{style:{marginTop:"5px",fontSize:"0.9rem",color:"#666"},children:[(0,i.jsx)("strong",{children:"Note:"})," Many shapefiles don't include state information. Enter the state here if your file doesn't have it."]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"3️⃣ Select File (GeoJSON, Shapefile, or ZIP):"}),(0,i.jsx)("input",{type:"file",accept:".geojson,.json,.shp,.zip",onChange:e=>{var s;_(null==(s=e.target.files)?void 0:s[0]),Q(null),O(null)},disabled:R}),I&&(0,i.jsxs)("p",{style:{marginTop:"10px",color:"#666"},children:["Selected: ",(0,i.jsx)("strong",{children:I.name})," (",(I.size/1024/1024).toFixed(2)," MB)",I.size>0x3200000&&(0,i.jsx)("span",{style:{color:"#ff6b6b",marginLeft:"10px"},children:"⚠️ Large file - processing may take several minutes"})]}),(0,i.jsxs)("p",{style:{marginTop:"10px",fontSize:"0.9rem",color:"#666"},children:[(0,i.jsx)("strong",{children:"Supported formats:"})," GeoJSON (.geojson, .json), Shapefile (.shp), or ZIP archives containing shapefiles (.zip)"]})]}),(0,i.jsx)("div",{className:"form-group",children:(0,i.jsx)("button",{onClick:eA,disabled:!I||R,className:"primary-button",children:R?"⏳ Uploading...":"\uD83D\uDCE4 Upload File"})}),W&&(0,i.jsxs)("div",{className:"error-message",style:{marginTop:"20px"},children:[(0,i.jsx)("strong",{children:"Error:"})," ",W]}),M&&(0,i.jsxs)("div",{className:"success-message",style:{marginTop:"20px",padding:"20px",background:"#f0f7ed",borderRadius:"8px"},children:[(0,i.jsx)("h3",{style:{marginTop:0},children:"✅ Upload Complete!"}),(0,i.jsxs)("ul",{style:{textAlign:"left",display:"inline-block"},children:[(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"File:"})," ",M.sourceName]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Source Type:"})," ",M.sourceType]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Parks Found:"})," ",M.parksFound]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Parks Added:"})," ",M.parksAdded]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Parks Updated:"})," ",M.parksUpdated]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Parks Skipped:"})," ",M.parksSkipped]})]}),M.errors&&M.errors.length>0&&(0,i.jsxs)("div",{style:{marginTop:"10px"},children:[(0,i.jsx)("strong",{children:"Errors:"}),(0,i.jsx)("ul",{style:{textAlign:"left"},children:M.errors.map((e,s)=>(0,i.jsxs)("li",{children:[e.park,": ",e.error]},s))})]})]})]}),"quality"===e&&(0,i.jsxs)("div",{className:"section",children:[(0,i.jsx)("h2",{children:"\uD83D\uDD0D Data Quality & Cleanup"}),(0,i.jsx)("p",{className:"section-description",children:"Review data quality metrics, identify issues, and clean up your database"}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Filter by State:"}),(0,i.jsxs)("select",{value:eo.state,onChange:e=>{ec({...eo,state:e.target.value})},disabled:ei,children:[(0,i.jsx)("option",{value:"",children:"All States"}),t.map(e=>(0,i.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Filter by Agency:"}),(0,i.jsx)("input",{type:"text",value:eo.agency,onChange:e=>ec({...eo,agency:e.target.value}),placeholder:"e.g., NPS, BLM",disabled:ei,style:{width:"100%",padding:"8px"}})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Filter by Data Source:"}),(0,i.jsx)("input",{type:"text",value:eo.dataSource,onChange:e=>ec({...eo,dataSource:e.target.value}),placeholder:"e.g., PAD-US, ParkServe",disabled:ei,style:{width:"100%",padding:"8px"}})]}),(0,i.jsx)("div",{className:"form-group",style:{display:"flex",alignItems:"flex-end"},children:(0,i.jsx)("button",{onClick:eN,disabled:ei,className:"primary-button",children:ei?"⏳ Loading...":"\uD83D\uDCCA Analyze"})})]}),el&&(0,i.jsxs)("div",{className:"error-message",style:{marginBottom:"20px"},children:["❌ ",el]}),ea&&(0,i.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,i.jsx)("h3",{children:"\uD83D\uDCCA Quality Metrics"}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px",marginTop:"15px"},children:[(0,i.jsxs)("div",{style:{padding:"15px",background:"#f0f7ed",borderRadius:"8px"},children:[(0,i.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:ea.total}),(0,i.jsx)("div",{children:"Total Parks"})]}),(0,i.jsxs)("div",{style:{padding:"15px",background:"#e8f4f8",borderRadius:"8px"},children:[(0,i.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:ea.averageQualityScore.toFixed(1)}),(0,i.jsx)("div",{children:"Avg Quality Score"})]}),(0,i.jsxs)("div",{style:{padding:"15px",background:"#fff4e6",borderRadius:"8px"},children:[(0,i.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:ea.likelyNonParks.length}),(0,i.jsx)("div",{children:"Likely Non-Parks"})]}),(0,i.jsxs)("div",{style:{padding:"15px",background:"#fee",borderRadius:"8px"},children:[(0,i.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:ea.issues.length}),(0,i.jsx)("div",{children:"Parks with Issues"})]})]}),(0,i.jsxs)("div",{style:{marginTop:"20px",padding:"15px",background:"#f9f9f9",borderRadius:"8px"},children:[(0,i.jsx)("h4",{children:"Field Completeness"}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"10px",marginTop:"10px"},children:[(0,i.jsxs)("div",{children:["\uD83D\uDCCD Coordinates: ",ea.percentages.withCoordinates,"%"]}),(0,i.jsxs)("div",{children:["\uD83D\uDCDD Description: ",ea.percentages.withDescription,"%"]}),(0,i.jsxs)("div",{children:["\uD83C\uDF10 Website: ",ea.percentages.withWebsite,"%"]}),(0,i.jsxs)("div",{children:["\uD83D\uDCDE Phone: ",ea.percentages.withPhone,"%"]}),(0,i.jsxs)("div",{children:["\uD83C\uDFE0 Address: ",ea.percentages.withAddress,"%"]}),(0,i.jsxs)("div",{children:["\uD83D\uDDFA️ Boundary: ",ea.percentages.withGeometry,"%"]})]})]}),(0,i.jsxs)("div",{style:{marginTop:"20px",padding:"15px",background:"#f9f9f9",borderRadius:"8px"},children:[(0,i.jsx)("h4",{children:"Quality Distribution"}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"10px",marginTop:"10px"},children:[(0,i.jsxs)("div",{children:["✅ Excellent (80-100): ",ea.qualityDistribution.excellent]}),(0,i.jsxs)("div",{children:["\uD83D\uDC4D Good (60-79): ",ea.qualityDistribution.good]}),(0,i.jsxs)("div",{children:["⚠️ Fair (40-59): ",ea.qualityDistribution.fair]}),(0,i.jsxs)("div",{children:["❌ Poor (0-39): ",ea.qualityDistribution.poor]})]})]})]}),(0,i.jsxs)("div",{style:{marginTop:"30px",padding:"20px",background:"#e8f4f8",borderRadius:"8px"},children:[(0,i.jsx)("h3",{children:"\uD83D\uDD0E Quick Filters"}),(0,i.jsx)("p",{children:"Find parks that need attention:"}),(0,i.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px",marginTop:"15px"},children:[(0,i.jsx)("button",{onClick:()=>ew({nameKeywords:["office","facility","headquarters","admin"]}),disabled:ei,className:"primary-button",style:{fontSize:"0.9rem"},children:"\uD83C\uDFE2 Find Offices/Facilities"}),(0,i.jsx)("button",{onClick:()=>ew({maxAcres:.1}),disabled:ei,className:"primary-button",style:{fontSize:"0.9rem"},children:"\uD83D\uDCCF Very Small (< 0.1 acres)"}),(0,i.jsx)("button",{onClick:()=>ew({missingFields:["description","website","phone"]}),disabled:ei,className:"primary-button",style:{fontSize:"0.9rem"},children:"\uD83D\uDCCB Missing Info"}),(0,i.jsx)("button",{onClick:()=>ew({missingFields:["coordinates"]}),disabled:ei,className:"primary-button",style:{fontSize:"0.9rem"},children:"\uD83D\uDCCD Missing Coordinates"}),(0,i.jsx)("button",{onClick:()=>ew({missingFields:["geometry"]}),disabled:ei,className:"primary-button",style:{fontSize:"0.9rem"},children:"\uD83D\uDDFA️ Missing Boundaries"}),ea&&ea.likelyNonParks.length>0&&(0,i.jsxs)("button",{onClick:()=>{let e=ea.likelyNonParks.map(e=>e.id);eu(ea.likelyNonParks.map(e=>({id:e.id,name:e.name,state:e.state,agency:e.agency,acres:e.acres,qualityScore:0}))),ex(new Set(e))},disabled:ei,className:"primary-button",style:{fontSize:"0.9rem",background:"#ff6b6b"},children:["\uD83D\uDEAB Likely Non-Parks (",ea.likelyNonParks.length,")"]})]})]}),ep.length>0&&(0,i.jsxs)("div",{style:{marginTop:"30px"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[(0,i.jsxs)("h3",{children:["\uD83D\uDCCB Filtered Parks (",ep.length,")"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("button",{onClick:eE,className:"primary-button",style:{marginRight:"10px",fontSize:"0.9rem"},children:eh.size===ep.length?"Deselect All":"Select All"}),eh.size>0&&(0,i.jsx)("button",{onClick:eT,disabled:eg,className:"primary-button",style:{background:"#ff6b6b",fontSize:"0.9rem"},children:eg?"⏳ Deleting...":"\uD83D\uDDD1️ Delete Selected (".concat(eh.size,")")})]})]}),(0,i.jsx)("div",{style:{maxHeight:"500px",overflowY:"auto",border:"1px solid #ddd",borderRadius:"8px"},children:(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,i.jsx)("thead",{style:{background:"#f5f5f5",position:"sticky",top:0},children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left",borderBottom:"2px solid #ddd"},children:(0,i.jsx)("input",{type:"checkbox",checked:eh.size===ep.length&&ep.length>0,onChange:eE})}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left",borderBottom:"2px solid #ddd"},children:"Name"}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left",borderBottom:"2px solid #ddd"},children:"State"}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left",borderBottom:"2px solid #ddd"},children:"Agency"}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left",borderBottom:"2px solid #ddd"},children:"Acres"}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left",borderBottom:"2px solid #ddd"},children:"Quality"})]})}),(0,i.jsx)("tbody",{children:ep.map(e=>(0,i.jsxs)("tr",{style:{borderBottom:"1px solid #eee"},children:[(0,i.jsx)("td",{style:{padding:"10px"},children:(0,i.jsx)("input",{type:"checkbox",checked:eh.has(e.id),onChange:()=>eF(e.id)})}),(0,i.jsx)("td",{style:{padding:"10px"},children:e.name}),(0,i.jsx)("td",{style:{padding:"10px"},children:e.state}),(0,i.jsx)("td",{style:{padding:"10px"},children:e.agency}),(0,i.jsx)("td",{style:{padding:"10px"},children:e.acres?e.acres.toFixed(2):"N/A"}),(0,i.jsx)("td",{style:{padding:"10px"},children:(0,i.jsxs)("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"0.85rem",background:e.qualityScore>=80?"#d4edda":e.qualityScore>=60?"#d1ecf1":e.qualityScore>=40?"#fff3cd":"#f8d7da"},children:[e.qualityScore,"/100"]})})]},e.id))})]})})]}),ea&&ea.likelyNonParks.length>0&&0===ep.length&&(0,i.jsxs)("div",{style:{marginTop:"30px"},children:[(0,i.jsxs)("h3",{children:["\uD83D\uDEAB Likely Non-Parks (",ea.likelyNonParks.length,")"]}),(0,i.jsx)("p",{style:{color:"#666",marginBottom:"15px"},children:"These parks may be offices, facilities, or other non-park locations"}),(0,i.jsx)("div",{style:{maxHeight:"400px",overflowY:"auto",border:"1px solid #ddd",borderRadius:"8px"},children:(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,i.jsx)("thead",{style:{background:"#f5f5f5",position:"sticky",top:0},children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left",borderBottom:"2px solid #ddd"},children:(0,i.jsx)("input",{type:"checkbox",checked:eh.size===ea.likelyNonParks.length&&ea.likelyNonParks.length>0,onChange:()=>{eh.size===ea.likelyNonParks.length?ex(new Set):ex(new Set(ea.likelyNonParks.map(e=>e.id)))}})}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left",borderBottom:"2px solid #ddd"},children:"Name"}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left",borderBottom:"2px solid #ddd"},children:"State"}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left",borderBottom:"2px solid #ddd"},children:"Agency"}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left",borderBottom:"2px solid #ddd"},children:"Reason"}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left",borderBottom:"2px solid #ddd"},children:"Acres"})]})}),(0,i.jsx)("tbody",{children:ea.likelyNonParks.map(e=>(0,i.jsxs)("tr",{style:{borderBottom:"1px solid #eee"},children:[(0,i.jsx)("td",{style:{padding:"10px"},children:(0,i.jsx)("input",{type:"checkbox",checked:eh.has(e.id),onChange:()=>eF(e.id)})}),(0,i.jsx)("td",{style:{padding:"10px"},children:e.name}),(0,i.jsx)("td",{style:{padding:"10px"},children:e.state}),(0,i.jsx)("td",{style:{padding:"10px"},children:e.agency}),(0,i.jsx)("td",{style:{padding:"10px",fontSize:"0.9rem",color:"#666"},children:e.reason}),(0,i.jsx)("td",{style:{padding:"10px"},children:e.acres?e.acres.toFixed(2):"N/A"})]},e.id))})]})}),eh.size>0&&(0,i.jsx)("div",{style:{marginTop:"15px"},children:(0,i.jsx)("button",{onClick:eT,disabled:eg,className:"primary-button",style:{background:"#ff6b6b"},children:eg?"⏳ Deleting...":"\uD83D\uDDD1️ Delete Selected (".concat(eh.size,")")})})]})]})]}),(0,i.jsxs)("div",{className:"admin-footer",children:[(0,i.jsx)("h4",{children:"\uD83D\uDEE1️ Data Priority System"}),(0,i.jsxs)("div",{className:"priority-info",children:[(0,i.jsxs)("div",{className:"priority-item",children:[(0,i.jsx)("span",{className:"priority-badge priority-100",children:"100"}),(0,i.jsx)("span",{children:"API Data - Never overwritten"})]}),(0,i.jsxs)("div",{className:"priority-item",children:[(0,i.jsx)("span",{className:"priority-badge priority-80",children:"80"}),(0,i.jsx)("span",{children:"Agency Files - Protected"})]}),(0,i.jsxs)("div",{className:"priority-item",children:[(0,i.jsx)("span",{className:"priority-badge priority-40",children:"40"}),(0,i.jsx)("span",{children:"Web Scrapes - Fills gaps"})]})]})]})]})}},4635:(e,s,t)=>{Promise.resolve().then(t.bind(t,4180))},6255:()=>{}},e=>{e.O(0,[332,993,441,255,358],()=>e(e.s=4635)),_N_E=e.O()}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[231],{4231:(e,t,o)=>{async function r(e,t,o,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},{chunkSize:n=0x1400000,onProgress:c}=a,s=Math.ceil(t.size/n);if(!e)throw Error("Supabase client is required");try{for(let a=0;a<s;a++){let l=a*n,i=Math.min(l+n,t.size),u=t.slice(l,i),h="".concat(r,".chunk.").concat(a),d=3;for(;d>0;)try{let{error:t}=await e.storage.from(o).upload(h,u,{cacheControl:"3600",upsert:!0});if(t){if(--d>0){let e=1e3*Math.pow(2,3-d);console.warn("Chunk ".concat(a+1," upload failed, retrying in ").concat(e,"ms... (").concat(d," retries left)")),await new Promise(t=>setTimeout(t,e));continue}throw Error("Failed to upload chunk ".concat(a+1,"/").concat(s," after 3 attempts: ").concat(t.message))}break}catch(t){if(d--,0===d)throw Error("Failed to upload chunk ".concat(a+1,"/").concat(s,": ").concat(t.message));let e=1e3*Math.pow(2,3-d);console.warn("Chunk ".concat(a+1," upload error, retrying in ").concat(e,"ms... (").concat(d," retries left)")),await new Promise(t=>setTimeout(t,e))}c&&c({chunkNumber:a+1,totalChunks:s,bytesUploaded:i,totalBytes:t.size,percentage:Math.round(i/t.size*100)}),a<s-1&&await new Promise(e=>setTimeout(e,100))}return{success:!0}}catch(e){return console.error("Chunked upload error:",e),{success:!1,error:e.message||"Upload failed"}}}async function a(e,t,o,r){let a=[];for(let n=0;n<r;n++){let r="".concat(o,".chunk.").concat(n),{data:c,error:s}=await e.storage.from(t).download(r);if(s)throw Error("Failed to download chunk ".concat(n,": ").concat(s.message));a.push(await c.arrayBuffer())}let n=new Uint8Array(a.reduce((e,t)=>e+t.byteLength,0)),c=0;for(let e of a)n.set(new Uint8Array(e),c),c+=e.byteLength;return new Blob([n])}async function n(e,t,o,r){let a=[];for(let e=0;e<r;e++)a.push("".concat(o,".chunk.").concat(e));try{await e.storage.from(t).remove(a)}catch(e){console.warn("Failed to cleanup chunks:",e)}}o.r(t),o.d(t,{cleanupChunks:()=>n,downloadAndReassembleChunks:()=>a,uploadFileInChunks:()=>r})}}]);